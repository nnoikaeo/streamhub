# User Flow Diagrams

> **Document Status:** UI/UX Design Document  
> **Last Updated:** 2024-01  
> **Document Owner:** Development Team

---

## ğŸ“‹ Table of Contents

1. [Overview](#overview)
2. [USER Role Flow](#user-role-flow)
3. [MODERATOR Role Flow](#moderator-role-flow)
4. [ADMIN Role Flow](#admin-role-flow)
5. [Authentication Flow](#authentication-flow)
6. [Company Switching Flow](#company-switching-flow)
7. [Permission Denied Scenarios](#permission-denied-scenarios)

---

## ğŸ¯ Overview

This document outlines the user flows for StreamHub Dashboard Management System across three roles:

- **USER**: View-only access to assigned dashboards
- **MODERATOR**: Create and manage folders, create/edit dashboards in assigned folders
- **ADMIN**: Full system access including company, user, and permission management

**Key Principles:**
- All users must authenticate via Google OAuth
- Access is permission-based (not company-based for resources)
- Admins have global cross-company access
- Users see dashboards based on **3-layer permission model** (see [Roles & Permissions Guide > Permission Structure](../GUIDES/roles-and-permissions.md#-permission-structure))
- Moderators manage folders via `assignedFolders` array

**ğŸ“Œ Note:** For complete permission structure details, access logic, and Firestore security rules, refer to [Roles & Permissions Guide](../GUIDES/roles-and-permissions.md) - the single source of truth for all role and permission definitions.

---

## ğŸ‘¤ USER Role Flow

A regular user (Employee) can view dashboards within their company and those shared with them.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   START     â”‚
â”‚  (Browser)  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  StreamHub Login Page   â”‚
â”‚  (app/pages/index.vue)  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚                         â”‚
       â–¼                         â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Already â”‚          â”‚ Not logged   â”‚
  â”‚ Logged  â”‚          â”‚ in (OAuth)   â”‚
  â”‚  In?    â”‚          â”‚  Required    â”‚
  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                      â”‚
       â”‚ YES                  â”‚ AUTHENTICATE
       â”‚                      â–¼
       â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚              â”‚ Google OAuth Login   â”‚
       â”‚              â”‚ (Firebase Auth)      â”‚
       â”‚              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                     â”‚
       â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚    â”‚
       â–¼    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Load User Profile       â”‚
â”‚  - email                 â”‚
â”‚  - displayName           â”‚
â”‚  - role: "user"          â”‚
â”‚  - company: "STTH"       â”‚
â”‚  - permissions           â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Dashboard Discover Page       â”‚
â”‚  (app/pages/dashboard/index)   â”‚
â”‚                                â”‚
â”‚  Show dashboards where user    â”‚
â”‚  has access permission.        â”‚
â”‚                                â”‚
â”‚  (For permission logic, see    â”‚
â”‚  Roles & Permissions Guide >   â”‚
â”‚  Access Logic section)         â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚                                     â”‚
       â–¼                                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  View Dashboard      â”‚            â”‚  Folder View    â”‚
â”‚  (embedded Looker)   â”‚            â”‚  (Browse only)  â”‚
â”‚                      â”‚            â”‚                 â”‚
â”‚  - Visualizations    â”‚            â”‚ Can see folder  â”‚
â”‚  - Reports           â”‚            â”‚ structure but   â”‚
â”‚  - Metrics           â”‚            â”‚ cannot edit     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                                     â”‚
       â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚    â”‚
       â–¼    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  View Dashboard Details  â”‚
â”‚  - Title                 â”‚
â”‚  - Description           â”‚
â”‚  - Created by            â”‚
â”‚  - Last updated          â”‚
â”‚  - Refresh data          â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â”€YESâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚                           â”‚
       â”‚ Feedback or Issues?       â”‚ NO
       â”‚                           â”‚
       â–¼                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Report Issue/      â”‚      â”‚ Back to      â”‚
â”‚ Leave Feedback     â”‚      â”‚ Dashboard    â”‚
â”‚ (Contact Admin)    â”‚      â”‚ List         â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                           â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  View Profile  â”‚
            â”‚  - Settings    â”‚
            â”‚  - Preferences â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ Logout (Google)â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚  Back to Login â”‚
            â”‚     (END)      â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### USER Flow Decision Points

| Decision Point | Outcome | Next Step |
|---|---|---|
| **Has Google Account?** | âœ… Yes | Authenticate and load profile |
| | âŒ No | Show Google Sign-In button |
| **Has View Permission?** | âœ… Yes | Display dashboard in list |
| | âŒ No | Hide dashboard from list |
| **Expired Session?** | âœ… Yes | Refresh token / Re-authenticate |
| | âŒ No | Continue using app |

**ğŸ“ Note:** Permission checking uses 3-layer model (direct, company-scoped, restrictions). See [Roles & Permissions Guide > Access Logic](../GUIDES/roles-and-permissions.md#-access-logic) for details.

---

## ğŸ‘¨â€ğŸ’¼ MODERATOR Role Flow

A moderator (Team Lead) manages folders and dashboards within their assigned folders.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   START (Browser)    â”‚
â”‚  Moderator Login     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Authentication Flow        â”‚
â”‚ (Same as USER flow)        â”‚
â”‚ role: "moderator"          â”‚
â”‚ company: "STTH"            â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Moderator Dashboard Page       â”‚
â”‚  (app/pages/dashboard/index)    â”‚
â”‚                                 â”‚
â”‚  Load:                          â”‚
â”‚  - Assigned folders             â”‚
â”‚  - Manageable dashboards        â”‚
â”‚  - My creations                 â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚                                     â”‚
       â–¼                                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  View Assigned Folders   â”‚      â”‚ Create New Folder â”‚
â”‚                          â”‚      â”‚ (Admin approval?) â”‚
â”‚  For each folder in      â”‚      â”‚                   â”‚
â”‚  assignedFolders:        â”‚      â”‚ - Folder Name     â”‚
â”‚  - Folder name           â”‚      â”‚ - Description     â”‚
â”‚  - Sub-folders           â”‚      â”‚ - Assign mods     â”‚
â”‚  - Dashboards (count)    â”‚      â”‚ - Permissions     â”‚
â”‚  - Created by            â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
       â”‚                                   â”‚
       â–¼                                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  Select Folder to Manage     â”‚           â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
       â”‚                                   â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
       â”‚                         â”‚         â”‚
       â–¼                         â–¼         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ View Folder    â”‚      â”‚ Create New   â”‚  â”‚
â”‚ Details        â”‚      â”‚ Subfolder    â”‚  â”‚
â”‚                â”‚      â”‚              â”‚  â”‚
â”‚ - Dashboard    â”‚      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚   list (in     â”‚             â”‚          â”‚
â”‚   folder)      â”‚             â”‚          â”‚
â”‚ - Subfolders   â”‚             â”‚          â”‚
â”‚ - Permissions  â”‚             â”‚          â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚          â”‚
     â”‚                         â”‚          â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚                         â”‚          â”‚
     â–¼                         â–¼          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Create Dashboard â”‚  â”‚ Edit Folder  â”‚
â”‚ in Folder        â”‚  â”‚ Settings     â”‚
â”‚                  â”‚  â”‚              â”‚
â”‚ - Title          â”‚  â”‚ - Name       â”‚
â”‚ - Description    â”‚  â”‚ - Desc       â”‚
â”‚ - Looker URL     â”‚  â”‚ - Assign modsâ”‚
â”‚ - Permissions    â”‚  â”‚ - Perms      â”‚
â”‚ - Metadata       â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
         â”‚                   â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¤
         â”‚              â”‚    â”‚
         â–¼              â–¼    â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ Edit/Delete Dashboard      â”‚
      â”‚ (if created by moderator)  â”‚
      â”‚                            â”‚
      â”‚ - Edit metadata            â”‚
      â”‚ - Update Looker URL        â”‚
      â”‚ - Change permissions       â”‚
      â”‚ - View analytics           â”‚
      â”‚ - Delete (with confirm)    â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
               â”‚                          â”‚
               â–¼                          â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ Save Changes   â”‚        â”‚ Cancel/Exit  â”‚
      â”‚ (Update DB)    â”‚        â”‚              â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚                       â”‚
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚ Dashboard Manage  â”‚
                  â”‚ Page Updated      â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚ View Profile /    â”‚
                  â”‚ Settings          â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚ Logout            â”‚
                  â”‚ (END)             â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### MODERATOR Flow Decision Points

| Decision Point | Outcome | Next Step |
|---|---|---|
| **User assigned to folder?** | âœ… Yes | Show folder and dashboards |
| | âŒ No | Hide folder from list |
| **Can create new folder?** | âœ… Yes (if admin) | Allow creation form |
| | âŒ No | Show "Request folder" button |
| **Can edit dashboard?** | âœ… Yes (created by me) | Show edit/delete buttons |
| | âŒ No | Show view-only mode |
| **Permission changed?** | âœ… Yes | Update DB and refresh UI |
| | âŒ No | Discard changes |

**ğŸ“ Note:** Dashboard permissions are checked using 3-layer model. See [Roles & Permissions Guide > Permission Structure](../GUIDES/roles-and-permissions.md#-dashboard-access-structure) for details.

---

## ğŸ”‘ ADMIN Role Flow

An admin (System Administrator) has full control over companies, users, folders, and dashboards.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   START (Browser)    â”‚
â”‚  Admin Login         â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Authentication Flow        â”‚
â”‚ (Same as USER flow)        â”‚
â”‚ role: "admin"              â”‚
â”‚ company: "STTH" (home)     â”‚
â”‚ (but global access)        â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Admin Dashboard (Home Page)    â”‚
â”‚  (app/pages/admin/dashboard)    â”‚
â”‚                                 â”‚
â”‚  Quick Stats:                   â”‚
â”‚  - Total companies              â”‚
â”‚  - Total users                  â”‚
â”‚  - Total dashboards             â”‚
â”‚  - Recent activity              â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚                                         â”‚
       â–¼                                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚ Navigate Admin Menu         â”‚                â”‚
â”‚                             â”‚                â”‚
â”‚ 1. Companies Management     â”‚                â”‚
â”‚ 2. Users Management         â”‚                â”‚
â”‚ 3. Folders Management       â”‚                â”‚
â”‚ 4. Dashboards Management    â”‚                â”‚
â”‚ 5. Audit & Activity Logs    â”‚                â”‚
â”‚ 6. System Settings          â”‚                â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
       â”‚                                       â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
       â”‚  â”‚  â”‚  â”‚  â”‚  â”‚                       â”‚
       â–¼  â–¼  â–¼  â–¼  â–¼  â–¼                       â”‚
       
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ 1. COMPANIES MANAGEMENT                                     â”‚
   â”‚    (app/pages/admin/companies)                              â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ View All Companies       â”‚
   â”‚                          â”‚
   â”‚ - Company code           â”‚
   â”‚ - Name                   â”‚
   â”‚ - Location               â”‚
   â”‚ - Employee count         â”‚
   â”‚ - Status (active/inactive)
   â”‚ - Actions (edit/delete)  â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚                â”‚              â”‚
            â–¼                â–¼              â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ Create   â”‚    â”‚ Edit        â”‚  â”‚ Delete     â”‚
      â”‚ New      â”‚    â”‚ Company     â”‚  â”‚ Company    â”‚
      â”‚ Company  â”‚    â”‚             â”‚  â”‚            â”‚
      â”‚          â”‚    â”‚ - Name      â”‚  â”‚ - Confirm  â”‚
      â”‚ - Code   â”‚    â”‚ - Location  â”‚  â”‚ - Cascade  â”‚
      â”‚ - Name   â”‚    â”‚ - Status    â”‚  â”‚   delete?  â”‚
      â”‚ - Loc    â”‚    â”‚ - Metadata  â”‚  â”‚            â”‚
      â”‚ - Meta   â”‚    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜           â”‚                 â”‚
           â”‚                 â”‚                 â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                 â”‚
                    â–¼                 â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ Back to Companies List           â”‚
            â”‚ (Changes applied)                â”‚
            â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â”‚
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ 2. USERS MANAGEMENT                                        â”‚
   â”‚    (app/pages/admin/users)                                 â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚ View All Users           â”‚
      â”‚ (Filter by company)      â”‚
      â”‚                          â”‚
      â”‚ - Email                  â”‚
      â”‚ - Display Name           â”‚
      â”‚ - Role                   â”‚
      â”‚ - Company                â”‚
      â”‚ - Status                 â”‚
      â”‚ - Last login             â”‚
      â”‚ - Actions                â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
               â”‚              â”‚         â”‚            â”‚
               â–¼              â–¼         â–¼            â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ Invite   â”‚  â”‚ Edit     â”‚  â”‚ Remove â”‚  â”‚ Resend â”‚
         â”‚ New User â”‚  â”‚ User     â”‚  â”‚ User   â”‚  â”‚ Invite â”‚
         â”‚          â”‚  â”‚          â”‚  â”‚        â”‚  â”‚        â”‚
         â”‚ - Email  â”‚  â”‚ - Role   â”‚  â”‚ - Conf â”‚  â”‚ Email  â”‚
         â”‚ - Role   â”‚  â”‚ - Companyâ”‚  â”‚ - Del  â”‚  â”‚ link   â”‚
         â”‚ - Companyâ”‚  â”‚ - Status â”‚  â”‚ - Arch â”‚  â”‚        â”‚
         â”‚ - Send   â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜  â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
         â”‚   invite â”‚       â”‚             â”‚           â”‚
         â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜       â”‚             â”‚           â”‚
              â”‚             â”‚             â”‚           â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ Back to Users List           â”‚
              â”‚ (Changes applied)            â”‚
              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â”‚
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ 3. FOLDERS MANAGEMENT                                      â”‚
   â”‚    (app/pages/admin/folders)                               â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ View All Folders         â”‚
              â”‚ (Across all companies)   â”‚
              â”‚                          â”‚
              â”‚ - Folder Name            â”‚
              â”‚ - Created by             â”‚
              â”‚ - Assigned Moderators    â”‚
              â”‚ - Subfolder count        â”‚
              â”‚ - Dashboard count        â”‚
              â”‚ - Actions                â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                       â”‚              â”‚              â”‚
                       â–¼              â–¼              â–¼
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚ Create   â”‚  â”‚ Edit     â”‚  â”‚ Delete   â”‚
                 â”‚ Folder   â”‚  â”‚ Folder   â”‚  â”‚ Folder   â”‚
                 â”‚          â”‚  â”‚          â”‚  â”‚          â”‚
                 â”‚ - Name   â”‚  â”‚ - Name   â”‚  â”‚ - Confirmâ”‚
                 â”‚ - Desc   â”‚  â”‚ - Desc   â”‚  â”‚ - Warn   â”‚
                 â”‚ - Assign â”‚  â”‚ - Assign â”‚  â”‚ - Move   â”‚
                 â”‚   mods   â”‚  â”‚   mods   â”‚  â”‚   dash?  â”‚
                 â”‚ - Perms  â”‚  â”‚ - Perms  â”‚  â”‚          â”‚
                 â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                      â”‚             â”‚             â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚ Back to Folders List     â”‚
                        â”‚ (Changes applied)        â”‚
                        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â”‚
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ 4. DASHBOARDS MANAGEMENT                                   â”‚
   â”‚    (app/pages/admin/dashboards)                            â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚ View All Dashboards      â”‚
                        â”‚ (Across all companies)   â”‚
                        â”‚ (Filter by folder)       â”‚
                        â”‚                          â”‚
                        â”‚ - Title                  â”‚
                        â”‚ - Folder                 â”‚
                        â”‚ - Created by             â”‚
                        â”‚ - Permissions            â”‚
                        â”‚ - Status                 â”‚
                        â”‚ - Actions                â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â”œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
                                 â”‚      â”‚      â”‚        â”‚
                                 â–¼      â–¼      â–¼        â–¼
                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”
                           â”‚ View   â”‚  â”‚Editâ”‚ â”‚Deleteâ”‚
                           â”‚        â”‚  â”‚    â”‚ â”‚      â”‚
                           â”‚ - URL  â”‚  â”‚Permâ”‚ â”‚Confirm
                           â”‚ - Permsâ”‚  â”‚    â”‚ â”‚Delete
                           â”‚ - Meta â”‚  â”‚    â”‚ â”‚Archive
                           â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”¬â”€â”˜ â””â”€â”€â”€â”¬â”€â”€â”˜
                               â”‚          â”‚       â”‚
                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                                       â–¼
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚ Back to Dashboards List  â”‚
                            â”‚ (Changes applied)        â”‚
                            â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                                   â”‚
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ 5. AUDIT & ACTIVITY LOGS                                   â”‚
   â”‚    (app/pages/admin/audit-logs)                            â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                                   â–¼
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚ View Activity Log        â”‚
                            â”‚ (Filter by date/user)    â”‚
                            â”‚                          â”‚
                            â”‚ - Timestamp              â”‚
                            â”‚ - User                   â”‚
                            â”‚ - Action                 â”‚
                            â”‚ - Resource               â”‚
                            â”‚ - Changes                â”‚
                            â”‚ - IP Address             â”‚
                            â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                                   â”‚
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ 6. SYSTEM SETTINGS                                         â”‚
   â”‚    (app/pages/admin/settings)                              â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                                   â–¼
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚ System Settings          â”‚
                            â”‚                          â”‚
                            â”‚ - Email notifications    â”‚
                            â”‚ - Default permissions    â”‚
                            â”‚ - Backup settings        â”‚
                            â”‚ - Security settings      â”‚
                            â”‚ - Rate limiting          â”‚
                            â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                                   â–¼
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚ View Profile / Logout    â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â–¼
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚ End Session            â”‚
                            â”‚ (END)                  â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ADMIN Flow Decision Points

| Decision Point | Outcome | Next Step |
|---|---|---|
| **Global Admin?** | âœ… Yes | Access all companies |
| | âŒ No (Limited) | Filter by assigned companies |
| **Can create company?** | âœ… Yes | Show creation form |
| | âŒ No | Show request button |
| **Delete company?** | âœ… Confirmed | Cascade delete users/folders/dashboards |
| | âŒ Cancelled | Stay on company list |
| **Modify user role?** | âœ… Yes | Update DB + re-authenticate |
| | âŒ No (Permission denied) | Show error message |

---

## ğŸ” Authentication Flow

All three roles follow the same authentication flow:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User visits /           â”‚
â”‚  (app/pages/index.vue)   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Check Firebase Auth Status    â”‚
â”‚  (useAuth composable)          â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚        â”‚
       â”‚YES     â”‚NO
       â”‚        â”‚
       â–¼        â–¼
   â”Œâ”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚Autoâ”‚  â”‚ Show Login Page           â”‚
   â”‚Loadâ”‚  â”‚ - Google Sign-In Button   â”‚
   â”‚Pro-â”‚  â”‚ - "Sign in with Google"   â”‚
   â”‚fileâ”‚  â”‚                          â”‚
   â””â”€â”€â”¬â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚            â”‚
     â”‚            â”‚ User clicks
     â”‚            â”‚ "Sign in"
     â”‚            â”‚
     â”‚            â–¼
     â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚   â”‚ Firebase Google OAuth    â”‚
     â”‚   â”‚ - Opens Google login     â”‚
     â”‚   â”‚ - User authenticates     â”‚
     â”‚   â”‚ - Returns ID token       â”‚
     â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚          â”‚
     â”‚          â–¼
     â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚   â”‚ Create/Update Firebase   â”‚
     â”‚   â”‚ User (by UID)            â”‚
     â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚          â”‚
     â”‚          â–¼
     â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚   â”‚ Fetch User Doc from      â”‚
     â”‚   â”‚ /users/{uid}             â”‚
     â”‚   â”‚ - Check if exists        â”‚
     â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚          â”‚
     â”‚          â”œâ”€â”€â”€YESâ”€â”€â”€â”€â”€â”€â”
     â”‚          â”‚            â”‚NO
     â”‚          â–¼            â–¼
     â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚    â”‚User foundâ”‚  â”‚Create user   â”‚
     â”‚    â”‚Load role â”‚  â”‚with pending  â”‚
     â”‚    â”‚company   â”‚  â”‚status        â”‚
     â”‚    â”‚perms     â”‚  â”‚Admin must    â”‚
     â”‚    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â”‚verify        â”‚
     â”‚         â”‚        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚         â”‚               â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Check User Status        â”‚
    â”‚ (isActive: true?)        â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚     â”‚
           YES   NO (deactivated)
           â”‚     â”‚
           â–¼     â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Route toâ”‚  â”‚ Show access denied   â”‚
    â”‚home pageâ”‚  â”‚ message              â”‚
    â”‚by role  â”‚  â”‚ - Contact admin      â”‚
    â”‚         â”‚  â”‚ - Logout option      â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚               â”‚
         â”œUSER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
         â”‚               â”‚
         â”œMODERATOR â”€â”€â”€â”€â”€â”¤
         â”‚               â”‚
         â”œADMIN â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
         â”‚               â”‚
         â–¼               â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
    â”‚Route Successfulâ”‚   â”‚
    â”‚Home page loadedâ”‚   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
                         â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚Show Error Page â”‚
                    â”‚or Login again  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Company Switching Flow

For MODERATOR and ADMIN users who work across companies:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User at Dashboard Home   â”‚
â”‚ (Current company: STTH)  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ See Company Selector     â”‚
â”‚ (Top navbar dropdown)    â”‚
â”‚                          â”‚
â”‚ - Current: STTH          â”‚
â”‚ - Click to change        â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Show Company List        â”‚
â”‚ (Only accessible ones)   â”‚
â”‚                          â”‚
â”‚ For ADMIN:               â”‚
â”‚ - All 10+ companies      â”‚
â”‚                          â”‚
â”‚ For MODERATOR:           â”‚
â”‚ - Companies with         â”‚
â”‚   assigned folders       â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Select Different Company â”‚
â”‚ e.g., STTN              â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Update Context:          â”‚
â”‚ - Store company in      â”‚
â”‚   localStorage/Pinia    â”‚
â”‚ - Update user context   â”‚
â”‚ - Refresh data          â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Dashboard Home           â”‚
â”‚ Now showing STTN data    â”‚
â”‚ - Folders for STTN       â”‚
â”‚ - Dashboards for STTN    â”‚
â”‚ - Moderators for STTN    â”‚
â”‚ - Users for STTN         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âŒ Permission Denied Scenarios

ğŸ“Œ **For detailed permission checking logic, see [Roles & Permissions Guide > Access Logic](../GUIDES/roles-and-permissions.md#-access-logic) and [Use Cases & Examples](../GUIDES/roles-and-permissions.md#-use-cases--examples).**

### Scenario 1: USER Tries to View Protected Dashboard

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User clicks dashboard    â”‚
â”‚ (No view permission)     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Check Permissions        â”‚
â”‚ (3-layer model:          â”‚
â”‚  direct, company,        â”‚
â”‚  restrictions)           â”‚
â”‚                          â”‚
â”‚ User role = "user"       â”‚
â”‚ NO MATCH in any layer âŒ â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Show Error:              â”‚
â”‚ "Access Denied"          â”‚
â”‚                          â”‚
â”‚ "You don't have         â”‚
â”‚  permission to view     â”‚
â”‚  this dashboard"        â”‚
â”‚                          â”‚
â”‚ - Contact admin         â”‚
â”‚ - Back to home          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Scenario 2: MODERATOR Tries to Edit Unassigned Folder

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Moderator views folder   â”‚
â”‚ (not in assignedFolders) â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Check Assignment:        â”‚
â”‚ folder_id = "folder_101" â”‚
â”‚                          â”‚
â”‚ user.assignedFolders =   â”‚
â”‚ ["folder_50", "folder_51"]
â”‚                          â”‚
â”‚ NO MATCH âŒ              â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Show View-Only Mode      â”‚
â”‚                          â”‚
â”‚ - Hide edit buttons      â”‚
â”‚ - Hide delete buttons    â”‚
â”‚ - Hide create buttons    â”‚
â”‚ - Show message:          â”‚
â”‚   "Read-only access"     â”‚
â”‚ - "Request access" btn   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Scenario 3: MODERATOR Tries to Delete Admin-Only Dashboard

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Moderator tries to       â”‚
â”‚ delete dashboard         â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Check Dashboard Perms:   â”‚
â”‚ dashboard.permissions =  â”‚
â”‚ {                        â”‚
â”‚   "role:admin":          â”‚
â”‚   ["view", "edit",       â”‚
â”‚    "delete"]             â”‚
â”‚ }                        â”‚
â”‚                          â”‚
â”‚ User role = "moderator"  â”‚
â”‚ NO DELETE PERMISSION âŒ  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Show Warning:            â”‚
â”‚                          â”‚
â”‚ "Delete Not Allowed"     â”‚
â”‚                          â”‚
â”‚ "You can edit but not   â”‚
â”‚  delete this dashboard. â”‚
â”‚  Contact admin for      â”‚
â”‚  deletion."             â”‚
â”‚                          â”‚
â”‚ - [Cancel]              â”‚
â”‚ - [OK]                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Flow Summary Table

| Role | Entry Point | Main Actions | Key Checks | Restrictions |
|---|---|---|---|---|
| **USER** | `/dashboard` | View dashboards, Filters | `dashboard.permissions` | View-only, no management |
| **MODERATOR** | `/dashboard` or `/admin/folders` | Create/edit dashboards in folders, manage subfolders | `assignedFolders` array | Only assigned folders |
| **ADMIN** | `/admin` | Full CRUD on all entities | Role check | None (global access) |

---

## ğŸ¯ Next Steps

1. **Create Wireframes** for key pages (coming next)
   - Dashboard List Page
   - Folder Management Page
   - User Management Page
   - Company Selector
   - Permission Modal

2. **Design Navigation** structure
   - Sidebar layout for each role
   - Breadcrumb patterns
   - Menu visibility by role

3. **Create Component Breakdown**
   - Identify reusable components
   - Plan component hierarchy

---

## ğŸ“š Related Documents

- **[Roles & Permissions Guide](../GUIDES/roles-and-permissions.md)** â­ Single Source of Truth for permission logic
  - [Permission Structure](../GUIDES/roles-and-permissions.md#-permission-structure)
  - [Access Logic](../GUIDES/roles-and-permissions.md#-access-logic)
  - [Use Cases & Examples](../GUIDES/roles-and-permissions.md#-use-cases--examples)
  - [Firestore Security Rules](../GUIDES/roles-and-permissions.md#-firestore-security-rules)
- [Database Schema](../GUIDES/database-schema.md)
- [Company Management Guide](../GUIDES/company-management.md)
- [Development Roadmap](../OPERATIONS/roadmap.md)

---

**Document Maintainer:** Development Team  
**Last Updated:** 2024-01-21  
**Version:** 1.0
